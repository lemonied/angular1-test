/**
 * State-based routing for AngularJS
 * @version v0.2.18
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="ui.router"}(function(e,r,t){"use strict";var n=r.isDefined,i=r.isFunction,a=r.isString,u=r.isObject,o=r.isArray,s=r.forEach,l=r.extend,f=r.copy,c=r.toJson;function p(e,r){return l(new(l(function(){},{prototype:e})),r)}function h(e){s(arguments,function(r){if(r!==e){s(r,function(r,t){if(!e.hasOwnProperty(t))e[t]=r})}});return e}function v(e,r){var t=[];for(var n in e.path){if(e.path[n]!==r.path[n])break;t.push(e.path[n])}return t}function $(e){if(Object.keys){return Object.keys(e)}var r=[];s(e,function(e,t){r.push(t)});return r}function m(e,r){if(Array.prototype.indexOf){return e.indexOf(r,Number(arguments[2])||0)}var t=e.length>>>0,n=Number(arguments[2])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0)n+=t;for(;n<t;n++){if(n in e&&e[n]===r)return n}return-1}function d(e,r,t,n){var i=v(t,n),a,u={},o=[];for(var s in i){if(!i[s]||!i[s].params)continue;a=$(i[s].params);if(!a.length)continue;for(var f in a){if(m(o,a[f])>=0)continue;o.push(a[f]);u[a[f]]=e[a[f]]}}return l({},u,r)}function g(e,r,t){if(!t){t=[];for(var n in e)t.push(n)}for(var i=0;i<t.length;i++){var a=t[i];if(e[a]!=r[a])return false}return true}function y(e,r){var t={};s(e,function(e){t[e]=r[e]});return t}function w(e,r){var t={};s(e,function(e){t[e[r]]=e});return t}function b(e){var r={};var t=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));s(t,function(t){if(t in e)r[t]=e[t]});return r}function S(e){var r={};var t=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e){if(m(t,n)==-1)r[n]=e[n]}return r}function E(e,r){var t=o(e)?[]:{};s(e,function(e,n){t[n]=i(r)?r(e):e[r]});return t}function x(e,r){var t=o(e);var n=t?[]:{};s(e,function(e,i){if(r(e,i)){n[t?n.length:i]=e}});return n}function P(e,r){var t=o(e)?[]:{};s(e,function(e,n){t[n]=r(e,n)});return t}r.module("ui.router.util",["ng"]);r.module("ui.router.router",["ui.router.util"]);r.module("ui.router.state",["ui.router.router","ui.router.util"]);r.module("ui.router",["ui.router.state"]);r.module("ui.router.compat",["ui.router"]);j.$inject=["$q","$injector"];function j(e,r){var i=1,o=2,f={},c=[],p=f,v=l(e.when(f),{$$promises:f,$$values:f});this.study=function(f){if(!u(f))throw new Error("'invocables' must be an object");var d=$(f||{});var g=[],y=[],w={};function b(e,t){if(w[t]===o)return;y.push(t);if(w[t]===i){y.splice(0,m(y,t));throw new Error("Cyclic dependency: "+y.join(" -> "))}w[t]=i;if(a(e)){g.push(t,[function(){return r.get(e)}],c)}else{var n=r.annotate(e);s(n,function(e){if(e!==t&&f.hasOwnProperty(e))b(f[e],e)});g.push(t,e,n)}y.pop();w[t]=o}s(f,b);f=y=w=null;function E(e){return u(e)&&e.then&&e.$$promises}return function(i,a,o){if(E(i)&&o===t){o=a;a=i;i=null}if(!i)i=p;else if(!u(i)){throw new Error("'locals' must be an object")}if(!a)a=v;else if(!E(a)){throw new Error("'parent' must be a promise returned by $resolve.resolve()")}var f=e.defer(),c=f.promise,$=c.$$promises={},m=l({},i),y=1+g.length/3,w=false;function b(){if(!--y){if(!w)h(m,a.$$values);c.$$values=m;c.$$promises=c.$$promises||true;delete c.$$inheritedValues;f.resolve(m)}}function x(e){c.$$failure=e;f.reject(e)}if(n(a.$$failure)){x(a.$$failure);return c}if(a.$$inheritedValues){h(m,S(a.$$inheritedValues,d))}l($,a.$$promises);if(a.$$values){w=h(m,S(a.$$values,d));c.$$inheritedValues=S(a.$$values,d);b()}else{if(a.$$inheritedValues){c.$$inheritedValues=S(a.$$inheritedValues,d)}a.then(b,x)}for(var P=0,j=g.length;P<j;P+=3){if(i.hasOwnProperty(g[P]))b();else A(g[P],g[P+1],g[P+2])}function A(t,a,u){var l=e.defer(),f=0;function p(e){l.reject(e);x(e)}s(u,function(e){if($.hasOwnProperty(e)&&!i.hasOwnProperty(e)){f++;$[e].then(function(r){m[e]=r;if(!--f)h()},p)}});if(!f)h();function h(){if(n(c.$$failure))return;try{l.resolve(r.invoke(a,o,m));l.promise.then(function(e){m[t]=e;b()},p)}catch(e){p(e)}}$[t]=l.promise}return c}};this.resolve=function(e,r,t,n){return this.study(e)(r,t,n)}}r.module("ui.router.util").service("$resolve",j);A.$inject=["$http","$templateCache","$injector"];function A(e,r,t){this.fromConfig=function(e,r,t){return n(e.template)?this.fromString(e.template,r):n(e.templateUrl)?this.fromUrl(e.templateUrl,r):n(e.templateProvider)?this.fromProvider(e.templateProvider,r,t):null};this.fromString=function(e,r){return i(e)?e(r):e};this.fromUrl=function(t,n){if(i(t))t=t(n);if(t==null)return null;else return e.get(t,{cache:r,headers:{Accept:"text/html"}}).then(function(e){return e.data})};this.fromProvider=function(e,r,n){return t.invoke(e,null,n||{params:r})}}r.module("ui.router.util").service("$templateFactory",A);var k;function O(e,r,n){r=l({params:{}},u(r)?r:{});var i=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,a=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,o="^",s=0,f,c=this.segments=[],h=n?n.params:{},v=this.params=n?n.params.$$new():new k.ParamSet,$=[];function m(r,t,n,i){$.push(r);if(h[r])return h[r];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(r))throw new Error("Invalid parameter name '"+r+"' in pattern '"+e+"'");if(v[r])throw new Error("Duplicate parameter name '"+r+"' in pattern '"+e+"'");v[r]=new k.Param(r,t,n,i);return v[r]}function d(e,r,t,n){var i=["",""],a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!r)return a;switch(t){case false:i=["(",")"+(n?"?":"")];break;case true:a=a.replace(/\/$/,"");i=["(?:/(",")|/)?"];break;default:i=["("+t+"|",")?"];break}return a+i[0]+r+i[1]}this.source=e;function g(n,i){var a,u,o,l,f,c;a=n[2]||n[3];f=r.params[a];o=e.substring(s,n.index);u=i?n[4]:n[4]||(n[1]=="*"?".*":null);if(u){l=k.type(u)||p(k.type("string"),{pattern:new RegExp(u,r.caseInsensitive?"i":t)})}return{id:a,regexp:u,segment:o,type:l,cfg:f}}var y,w,b;while(f=i.exec(e)){y=g(f,false);if(y.segment.indexOf("?")>=0)break;w=m(y.id,y.type,y.cfg,"path");o+=d(y.segment,w.type.pattern.source,w.squash,w.isOptional);c.push(y.segment);s=i.lastIndex}b=e.substring(s);var S=b.indexOf("?");if(S>=0){var E=this.sourceSearch=b.substring(S);b=b.substring(0,S);this.sourcePath=e.substring(0,s+S);if(E.length>0){s=0;while(f=a.exec(E)){y=g(f,true);w=m(y.id,y.type,y.cfg,"search");s=i.lastIndex}}}else{this.sourcePath=e;this.sourceSearch=""}o+=d(b)+(r.strict===false?"/?":"")+"$";c.push(b);this.regexp=new RegExp(o,r.caseInsensitive?"i":t);this.prefix=c[0];this.$$paramNames=$}O.prototype.concat=function(e,r){var t={caseInsensitive:k.caseInsensitive(),strict:k.strictMode(),squash:k.defaultSquashPolicy()};return new O(this.sourcePath+e+this.sourceSearch,l(t,r),this)};O.prototype.toString=function(){return this.source};O.prototype.exec=function(e,r){var t=this.regexp.exec(e);if(!t)return null;r=r||{};var i=this.parameters(),a=i.length,u=this.segments.length-1,o={},s,l,f,c;if(u!==t.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function p(e){function r(e){return e.split("").reverse().join("")}function t(e){return e.replace(/\\-/g,"-")}var n=r(e).split(/-(?!\\)/);var i=P(n,r);return P(i,t).reverse()}var h,v;for(s=0;s<u;s++){c=i[s];h=this.params[c];v=t[s+1];for(l=0;l<h.replace.length;l++){if(h.replace[l].from===v)v=h.replace[l].to}if(v&&h.array===true)v=p(v);if(n(v))v=h.type.decode(v);o[c]=h.value(v)}for(;s<a;s++){c=i[s];o[c]=this.params[c].value(r[c]);h=this.params[c];v=r[c];for(l=0;l<h.replace.length;l++){if(h.replace[l].from===v)v=h.replace[l].to}if(n(v))v=h.type.decode(v);o[c]=h.value(v)}return o};O.prototype.parameters=function(e){if(!n(e))return this.$$paramNames;return this.params[e]||null};O.prototype.validates=function(e){return this.params.$$validates(e)};O.prototype.format=function(e){e=e||{};var r=this.segments,t=this.parameters(),n=this.params;if(!this.validates(e))return null;var i,u=false,s=r.length-1,l=t.length,f=r[0];function c(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}for(i=0;i<l;i++){var p=i<s;var h=t[i],v=n[h],$=v.value(e[h]);var m=v.isOptional&&v.type.equals(v.value(),$);var d=m?v.squash:false;var g=v.type.encode($);if(p){var y=r[i+1];var w=i+1===s;if(d===false){if(g!=null){if(o(g)){f+=P(g,c).join("-")}else{f+=encodeURIComponent(g)}}f+=y}else if(d===true){var b=f.match(/\/$/)?/\/?(.*)/:/(.*)/;f+=y.match(b)[1]}else if(a(d)){f+=d+y}if(w&&v.squash===true&&f.slice(-1)==="/")f=f.slice(0,-1)}else{if(g==null||m&&d!==false)continue;if(!o(g))g=[g];if(g.length===0)continue;g=P(g,encodeURIComponent).join("&"+h+"=");f+=(u?"&":"?")+(h+"="+g);u=true}}return f};function q(e){l(this,e)}q.prototype.is=function(e,r){return true};q.prototype.encode=function(e,r){return e};q.prototype.decode=function(e,r){return e};q.prototype.equals=function(e,r){return e==r};q.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)};q.prototype.pattern=/.*/;q.prototype.toString=function(){return"{Type:"+this.name+"}"};q.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)};q.prototype.$asArray=function(e,r){if(!e)return this;if(e==="auto"&&!r)throw new Error("'auto' array mode is for query parameters only");function i(e,r){function i(e,r){return function(){return e[r].apply(e,arguments)}}function a(e){return o(e)?e:n(e)?[e]:[]}function u(e){switch(e.length){case 0:return t;case 1:return r==="auto"?e[0]:e;default:return e}}function s(e){return!e}function l(e,r){return function t(n){if(o(n)&&n.length===0)return n;n=a(n);var i=P(n,e);if(r===true)return x(i,s).length===0;return u(i)}}function f(e){return function r(t,n){var i=a(t),u=a(n);if(i.length!==u.length)return false;for(var o=0;o<i.length;o++){if(!e(i[o],u[o]))return false}return true}}this.encode=l(i(e,"encode"));this.decode=l(i(e,"decode"));this.is=l(i(e,"is"),true);this.equals=f(i(e,"equals"));this.pattern=e.pattern;this.$normalize=l(i(e,"$normalize"));this.name=e.name;this.$arrayMode=r}return new i(this,e)};function C(){k=this;var e=false,f=true,c=false;function h(e){return e!=null?e.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):e}function v(e){return e!=null?e.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):e}var d={},g=true,y=[],w,b={string:{encode:h,decode:v,is:function(e){return e==null||!n(e)||typeof e==="string"},pattern:/[^/]*/},int:{encode:h,decode:function(e){return parseInt(e,10)},is:function(e){return n(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return parseInt(e,10)!==0},is:function(e){return e===true||e===false},pattern:/0|1/},date:{encode:function(e){if(!this.is(e))return t;return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")},decode:function(e){if(this.is(e))return e;var r=this.capture.exec(e);return r?new Date(r[1],r[2]-1,r[3]):t},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,r){return this.is(e)&&this.is(r)&&e.toISOString()===r.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:r.toJson,decode:r.fromJson,is:r.isObject,equals:r.equals,pattern:/[^/]*/},any:{encode:r.identity,decode:r.identity,equals:r.equals,pattern:/.*/}};function S(){return{strict:f,caseInsensitive:e}}function E(e){return i(e)||o(e)&&i(e[e.length-1])}C.$$getDefaultValue=function(e){if(!E(e.value))return e.value;if(!w)throw new Error("Injectable functions cannot be called at configuration time");return w.invoke(e.value)};this.caseInsensitive=function(r){if(n(r))e=r;return e};this.strictMode=function(e){if(n(e))f=e;return f};this.defaultSquashPolicy=function(e){if(!n(e))return c;if(e!==true&&e!==false&&!a(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");c=e;return e};this.compile=function(e,r){return new O(e,l(S(),r))};this.isMatcher=function(e){if(!u(e))return false;var r=true;s(O.prototype,function(t,a){if(i(t)){r=r&&(n(e[a])&&i(e[a]))}});return r};this.type=function(e,r,t){if(!n(r))return d[e];if(d.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");d[e]=new q(l({name:e},r));if(t){y.push({name:e,def:t});if(!g)j()}return this};function j(){while(y.length){var e=y.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");r.extend(d[e.name],w.invoke(e.def))}}s(b,function(e,r){d[r]=new q(l({name:r},e))});d=p(d,{});this.$get=["$injector",function(e){w=e;g=false;j();s(b,function(e,r){if(!d[r])d[r]=new q(e)});return this}];this.Param=function e(i,s,f,p){var h=this;f=S(f);s=j(f,s,p);var v=A();s=v?s.$asArray(v,p==="search"):s;if(s.name==="string"&&!v&&p==="path"&&f.value===t)f.value="";var g=f.value!==t;var y=k(f,g);var b=O(f,v,g,y);function S(e){var r=u(e)?$(e):[];var t=m(r,"value")===-1&&m(r,"type")===-1&&m(r,"squash")===-1&&m(r,"array")===-1;if(t)e={value:e};e.$$fn=E(e.value)?e.value:function(){return e.value};return e}function j(e,t,n){if(e.type&&t)throw new Error("Param '"+i+"' has two type configurations.");if(t)return t;if(!e.type)return n==="config"?d.any:d.string;if(r.isString(e.type))return d[e.type];if(e.type instanceof q)return e.type;return new q(e.type)}function A(){var e={array:p==="search"?"auto":false};var r=i.match(/\[\]$/)?{array:true}:{};return l(e,r,f).array}function k(e,r){var t=e.squash;if(!r||t===false)return false;if(!n(t)||t==null)return c;if(t===true||a(t))return t;throw new Error("Invalid squash policy: '"+t+"'. Valid policies: false, true, or arbitrary string")}function O(e,r,n,i){var u,s,l=[{from:"",to:n||r?t:""},{from:null,to:n||r?t:""}];u=o(e.replace)?e.replace:[];if(a(i))u.push({from:i,to:t});s=P(u,function(e){return e.from});return x(l,function(e){return m(s,e.from)===-1}).concat(u)}function C(){if(!w)throw new Error("Injectable functions cannot be called at configuration time");var e=w.invoke(f.$$fn);if(e!==null&&e!==t&&!h.type.is(e))throw new Error("Default value ("+e+") for parameter '"+h.id+"' is not an instance of Type ("+h.type.name+")");return e}function I(e){function r(e){return function(r){return r.from===e}}function t(e){var t=P(x(h.replace,r(e)),function(e){return e.to});return t.length?t[0]:e}e=t(e);return!n(e)?C():h.type.$normalize(e)}function V(){return"{Param:"+i+" "+s+" squash: '"+y+"' optional: "+g+"}"}l(this,{id:i,type:s,location:p,array:v,squash:y,replace:b,isOptional:g,value:I,dynamic:t,config:f,toString:V})};function A(e){l(this,e||{})}A.prototype={$$new:function(){return p(this,l(new A,{$$parent:this}))},$$keys:function(){var e=[],r=[],t=this,n=$(A.prototype);while(t){r.push(t);t=t.$$parent}r.reverse();s(r,function(r){s($(r),function(r){if(m(e,r)===-1&&m(n,r)===-1)e.push(r)})});return e},$$values:function(e){var r={},t=this;s(t.$$keys(),function(n){r[n]=t[n].value(e&&e[n])});return r},$$equals:function(e,r){var t=true,n=this;s(n.$$keys(),function(i){var a=e&&e[i],u=r&&r[i];if(!n[i].type.equals(a,u))t=false});return t},$$validates:function e(n){var i=this.$$keys(),a,u,o,s,l;for(a=0;a<i.length;a++){u=this[i[a]];o=n[i[a]];if((o===t||o===null)&&u.isOptional)break;s=u.type.$normalize(o);if(!u.type.is(s))return false;l=u.type.encode(s);if(r.isString(l)&&!u.type.pattern.exec(l))return false}return true},$$parent:t};this.ParamSet=A}r.module("ui.router.util").provider("$urlMatcherFactory",C);r.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]);I.$inject=["$locationProvider","$urlMatcherFactoryProvider"];function I(e,u){var s=[],f=null,c=false,p;function h(e){var r=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return r!=null?r[1].replace(/\\(.)/g,"$1"):""}function v(e,r){return e.replace(/\$(\$|\d{1,2})/,function(e,t){return r[t==="$"?0:Number(t)]})}this.rule=function(e){if(!i(e))throw new Error("'rule' must be a function");s.push(e);return this};this.otherwise=function(e){if(a(e)){var r=e;e=function(){return r}}else if(!i(e))throw new Error("'rule' must be a function");f=e;return this};function $(e,r,t){if(!t)return false;var i=e.invoke(r,r,{$match:t});return n(i)?i:true}this.when=function(e,r){var t,n=a(r);if(a(e))e=u.compile(e);if(!n&&!i(r)&&!o(r))throw new Error("invalid 'handler' in when()");var s={matcher:function(e,r){if(n){t=u.compile(r);r=["$match",function(e){return t.format(e)}]}return l(function(t,n){return $(t,r,e.exec(n.path(),n.search()))},{prefix:a(e.prefix)?e.prefix:""})},regex:function(e,r){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");if(n){t=r;r=["$match",function(e){return v(t,e)}]}return l(function(t,n){return $(t,r,e.exec(n.path()))},{prefix:h(e)})}};var f={matcher:u.isMatcher(e),regex:e instanceof RegExp};for(var c in f){if(f[c])return this.rule(s[c](e,r))}throw new Error("invalid 'what' in when()")};this.deferIntercept=function(e){if(e===t)e=true;c=e};this.$get=m;m.$inject=["$location","$rootScope","$injector","$browser","$sniffer"];function m(n,i,u,o,l){var h=o.baseHref(),v=n.url(),$;function m(e,r,t){if(h==="/")return e;if(r)return h.slice(0,-1)+e;if(t)return h.slice(1)+e;return e}function d(e){if(e&&e.defaultPrevented)return;var r=$&&n.url()===$;$=t;function i(e){var r=e(u,n);if(!r)return false;if(a(r))n.replace().url(r);return true}var o=s.length,l;for(l=0;l<o;l++){if(i(s[l]))return}if(f)i(f)}function g(){p=p||i.$on("$locationChangeSuccess",d);return p}if(!c)g();return{sync:function(){d()},listen:function(){return g()},update:function(e){if(e){v=n.url();return}if(n.url()===v)return;n.url(v);n.replace()},push:function(e,r,i){var a=e.format(r||{});if(a!==null&&r&&r["#"]){a+="#"+r["#"]}n.url(a);$=i&&i.$$avoidResync?n.url():t;if(i&&i.replace)n.replace()},href:function(t,i,a){if(!t.validates(i))return null;var u=e.html5Mode();if(r.isObject(u)){u=u.enabled}u=u&&l.history;var o=t.format(i);a=a||{};if(!u&&o!==null){o="#"+e.hashPrefix()+o}if(o!==null&&i&&i["#"]){o+="#"+i["#"]}o=m(o,u,a.absolute);if(!a.absolute||!o){return o}var s=!u&&o?"/":"",f=n.port();f=f===80||f===443?"":":"+f;return[n.protocol(),"://",n.host(),f,s,o].join("")}}}}r.module("ui.router.router").provider("$urlRouter",I);V.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"];function V(e,c){var h,v={},w,S={},E="abstract";var x={parent:function(e){if(n(e.parent)&&e.parent)return A(e.parent);var r=/^(.+)\.[^.]+$/.exec(e.name);return r?A(r[1]):h},data:function(e){if(e.parent&&e.parent.data){e.data=e.self.data=p(e.parent.data,e.data)}return e.data},url:function(e){var r=e.url,t={params:e.params||{}};if(a(r)){if(r.charAt(0)=="^")return c.compile(r.substring(1),t);return(e.parent.navigable||h).url.concat(r,t)}if(!r||c.isMatcher(r))return r;throw new Error("Invalid url '"+r+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var r=e.url&&e.url.params||new k.ParamSet;s(e.params||{},function(e,t){if(!r[t])r[t]=new k.Param(t,null,e,"config")});return r},params:function(e){var r=b(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?l(e.parent.params.$$new(),r):new k.ParamSet},views:function(e){var r={};s(n(e.views)?e.views:{"":e},function(t,n){if(n.indexOf("@")<0)n+="@"+e.parent.name;r[n]=t});return r},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var r=e.parent?l({},e.parent.includes):{};r[e.name]=true;return r},$delegates:{}};function j(e){return e.indexOf(".")===0||e.indexOf("^")===0}function A(e,r){if(!e)return t;var n=a(e),i=n?e:e.name,u=j(i);if(u){if(!r)throw new Error("No reference point given for path '"+i+"'");r=A(r);var o=i.split("."),s=0,l=o.length,f=r;for(;s<l;s++){if(o[s]===""&&s===0){f=r;continue}if(o[s]==="^"){if(!f.parent)throw new Error("Path '"+i+"' not valid for state '"+r.name+"'");f=f.parent;continue}break}o=o.slice(s).join(".");i=f.name+(f.name&&o?".":"")+o}var c=v[i];if(c&&(n||!n&&(c===e||c.self===e))){return c}return t}function O(e,r){if(!S[e]){S[e]=[]}S[e].push(r)}function q(e){var r=S[e]||[];while(r.length){C(r.shift())}}function C(r){r=p(r,{self:r,resolve:r.resolve||{},toString:function(){return this.name}});var t=r.name;if(!a(t)||t.indexOf("@")>=0)throw new Error("State must have a valid name");if(v.hasOwnProperty(t))throw new Error("State '"+t+"' is already defined");var n=t.indexOf(".")!==-1?t.substring(0,t.lastIndexOf(".")):a(r.parent)?r.parent:u(r.parent)&&a(r.parent.name)?r.parent.name:"";if(n&&!v[n]){return O(n,r.self)}for(var o in x){if(i(x[o]))r[o]=x[o](r,x.$delegates[o])}v[t]=r;if(!r[E]&&r.url){e.when(r.url,["$match","$stateParams",function(e,t){if(w.$current.navigable!=r||!g(e,t)){w.transitionTo(r,e,{inherit:true,location:false})}}])}q(t);return r}function I(e){return e.indexOf("*")>-1}function V(e){var r=e.split("."),t=w.$current.name.split(".");for(var n=0,i=r.length;n<i;n++){if(r[n]==="*"){t[n]="*"}}if(r[0]==="**"){t=t.slice(m(t,r[1]));t.unshift("**")}if(r[r.length-1]==="**"){t.splice(m(t,r[r.length-2])+1,Number.MAX_VALUE);t.push("**")}if(r.length!=t.length){return false}return t.join("")===r.join("")}h=C({name:"",url:"^",views:null,abstract:true});h.navigable=null;this.decorator=M;function M(e,r){if(a(e)&&!n(r)){return x[e]}if(!i(r)||!a(e)){return this}if(x[e]&&!x.$delegates[e]){x.$delegates[e]=x[e]}x[e]=r;return this}this.state=D;function D(e,r){if(u(e))r=e;else r.name=e;C(r);return this}this.$get=N;N.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"];function N(e,c,m,b,S,x,j,k,O){var q=c.reject(new Error("transition superseded"));var C=c.reject(new Error("transition prevented"));var M=c.reject(new Error("transition aborted"));var D=c.reject(new Error("transition failed"));function N(r,t,n,i){var a=e.$broadcast("$stateNotFound",r,t,n);if(a.defaultPrevented){j.update();return M}if(!a.retry){return null}if(i.$retry){j.update();return D}var u=w.transition=c.when(a.retry);u.then(function(){if(u!==w.transition)return q;r.options.$retry=true;return w.transitionTo(r.to,r.toParams,r.options)},function(){return M});j.update();return u}h.locals={resolve:null,globals:{$stateParams:{}}};w={params:{},current:h.self,$current:h,transition:null};w.reload=function e(r){return w.transitionTo(w.current,x,{reload:r||true,inherit:false,notify:true})};w.go=function e(r,t,n){return w.transitionTo(r,t,l({inherit:true,relative:w.$current},n))};w.transitionTo=function r(t,i,o){i=i||{};o=l({location:true,inherit:false,relative:null,notify:true,reload:false,$retry:false},o||{});var s=w.$current,v=w.params,$=s.path;var m,g=A(t,o.relative);var S=i["#"];if(!n(g)){var P={to:t,toParams:i,options:o};var k=N(P,s.self,v,o);if(k){return k}t=P.to;i=P.toParams;o=P.options;g=A(t,o.relative);if(!n(g)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(g[E])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit)i=d(x,i||{},w.$current,g);if(!g.params.$$validates(i))return D;i=g.params.$$values(i);t=g;var O=t.path;var I=0,V=O[I],M=h.locals,U=[];if(!o.reload){while(V&&V===$[I]&&V.ownParams.$$equals(i,v)){M=U[I]=V.locals;I++;V=O[I]}}else if(a(o.reload)||u(o.reload)){if(u(o.reload)&&!o.reload.name){throw new Error("Invalid reload state object")}var T=o.reload===true?$[0]:A(o.reload);if(o.reload&&!T){throw new Error("No such reload state '"+(a(o.reload)?o.reload:o.reload.name)+"'")}while(V&&V===$[I]&&V!==T){M=U[I]=V.locals;I++;V=O[I]}}if(R(t,i,s,v,M,o)){if(S)i["#"]=S;w.params=i;f(w.params,x);f(y(t.params.$$keys(),x),t.locals.globals.$stateParams);if(o.location&&t.navigable&&t.navigable.url){j.push(t.navigable.url,i,{$$avoidResync:true,replace:o.location==="replace"});j.update(true)}w.transition=null;return c.when(w.current)}i=y(t.params.$$keys(),i||{});if(S)i["#"]=S;if(o.notify){if(e.$broadcast("$stateChangeStart",t.self,i,s.self,v,o).defaultPrevented){e.$broadcast("$stateChangeCancel",t.self,i,s.self,v);if(w.transition==null)j.update();return C}}var z=c.when(M);for(var B=I;B<O.length;B++,V=O[B]){M=U[B]=p(M);z=F(V,i,V===t,z,M,o)}var J=w.transition=z.then(function(){var r,n,a;if(w.transition!==J)return q;for(r=$.length-1;r>=I;r--){a=$[r];if(a.self.onExit){b.invoke(a.self.onExit,a.self,a.locals.globals)}a.locals=null}for(r=I;r<O.length;r++){n=O[r];n.locals=U[r];if(n.self.onEnter){b.invoke(n.self.onEnter,n.self,n.locals.globals)}}if(w.transition!==J)return q;w.$current=t;w.current=t.self;w.params=i;f(w.params,x);w.transition=null;if(o.location&&t.navigable){j.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:true,replace:o.location==="replace"})}if(o.notify){e.$broadcast("$stateChangeSuccess",t.self,i,s.self,v)}j.update(true);return w.current},function(r){if(w.transition!==J)return q;w.transition=null;m=e.$broadcast("$stateChangeError",t.self,i,s.self,v,r);if(!m.defaultPrevented){j.update()}return c.reject(r)});return J};w.is=function e(r,i,a){a=l({relative:w.$current},a||{});var u=A(r,a.relative);if(!n(u)){return t}if(w.$current!==u){return false}return i?g(u.params.$$values(i),x):true};w.includes=function e(r,i,u){u=l({relative:w.$current},u||{});if(a(r)&&I(r)){if(!V(r)){return false}r=w.$current.name}var o=A(r,u.relative);if(!n(o)){return t}if(!n(w.$current.includes[o.name])){return false}return i?g(o.params.$$values(i),x,$(i)):true};w.href=function e(r,i,a){a=l({lossy:true,inherit:true,absolute:false,relative:w.$current},a||{});var u=A(r,a.relative);if(!n(u))return null;if(a.inherit)i=d(x,i||{},w.$current,u);var o=u&&a.lossy?u.navigable:u;if(!o||o.url===t||o.url===null){return null}return j.href(o.url,y(u.params.$$keys().concat("#"),i||{}),{absolute:a.absolute})};w.get=function(e,r){if(arguments.length===0)return P($(v),function(e){return v[e].self});var t=A(e,r||w.$current);return t&&t.self?t.self:null};function F(e,t,n,a,u,l){var f=n?t:y(e.params.$$keys(),t);var p={$stateParams:f};u.resolve=S.resolve(e.resolve,p,u.resolve,e);var h=[u.resolve.then(function(e){u.globals=e})];if(a)h.push(a);function v(){var t=[];s(e.views,function(n,a){var s=n.resolve&&n.resolve!==e.resolve?n.resolve:{};s.$template=[function(){return m.load(a,{view:n,locals:u.globals,params:f,notify:l.notify})||""}];t.push(S.resolve(s,u.globals,u.resolve,e).then(function(t){if(i(n.controllerProvider)||o(n.controllerProvider)){var l=r.extend({},s,u.globals);t.$$controller=b.invoke(n.controllerProvider,null,l)}else{t.$$controller=n.controller}t.$$state=e;t.$$controllerAs=n.controllerAs;u[a]=t}))});return c.all(t).then(function(){return u.globals})}return c.all(h).then(v).then(function(e){return u})}return w}function R(e,r,t,n,i,a){function u(e,r,t){function n(r){return e.params[r].location!="search"}var i=e.params.$$keys().filter(n);var a=b.apply({},[e.params].concat(i));var u=new k.ParamSet(a);return u.$$equals(r,t)}if(!a.reload&&e===t&&(i===t.locals||e.self.reloadOnSearch===false&&u(t,n,r))){return true}}}r.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",V);M.$inject=[];function M(){this.$get=e;e.$inject=["$rootScope","$templateFactory"];function e(e,r){return{load:function e(t,n){var i,a={template:null,controller:null,view:null,locals:null,notify:true,async:true,params:{}};n=l(a,n);if(n.view){i=r.fromConfig(n.view,n.params,n.locals)}return i}}}}r.module("ui.router.state").provider("$view",M);function D(){var e=false;this.useAnchorScroll=function(){e=true};this.$get=["$anchorScroll","$timeout",function(r,t){if(e){return r}return function(e){return t(function(){e[0].scrollIntoView()},0,false)}}]}r.module("ui.router.state").provider("$uiViewScroll",D);var N=r.version.major;var R=r.version.minor;F.$inject=["$state","$injector","$uiViewScroll","$interpolate"];function F(e,t,n,i){function a(){return t.has?function(e){return t.has(e)?t.get(e):null}:function(e){try{return t.get(e)}catch(e){return null}}}var u=a(),o=u("$animator"),s=u("$animate");function l(e,t){var n={enter:function(e,r,t){r.after(e);t()},leave:function(e,r){e.remove();r()}};if(!!e.noanimation)return n;function i(e){if(N===1&&R>=4)return!!s.enabled(e);if(N===1&&R>=2)return!!s.enabled();return!!o}if(s){return{enter:function(e,t,a){if(!i(e)){n.enter(e,t,a)}else if(r.version.minor>2){s.enter(e,null,t).then(a)}else{s.enter(e,null,t,a)}},leave:function(e,t){if(!i(e)){n.leave(e,t)}else if(r.version.minor>2){s.leave(e).then(t)}else{s.leave(e,t)}}}}if(o){var a=o&&o(t,e);return{enter:function(e,r,t){a.enter(e,null,r);t()},leave:function(e,r){a.leave(e);r()}}}return n}var f={restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(t,a,u){return function(t,a,o){var s,f,c,p,h=o.onload||"",v=o.autoscroll,$=l(o,t);t.$on("$stateChangeSuccess",function(){d(false)});d(true);function m(){var e=s;var r=c;if(r){r._willBeDestroyed=true}function t(){if(e){e.remove()}if(r){r.$destroy()}}if(f){$.leave(f,function(){t();s=null});s=f}else{t();s=null}f=null;c=null}function d(s){var l,d=T(t,o,a,i),g=d&&e.$current&&e.$current.locals[d];if(!s&&g===p||t._willBeDestroyed)return;l=t.$new();p=e.$current.locals[d];l.$emit("$viewContentLoading",d);var y=u(l,function(e){$.enter(e,a,function i(){if(c){c.$emit("$viewContentAnimationEnded")}if(r.isDefined(v)&&!v||t.$eval(v)){n(e)}});m()});f=y;c=l;c.$emit("$viewContentLoaded",d);c.$eval(h)}}}};return f}U.$inject=["$compile","$controller","$state","$interpolate"];function U(e,r,t,n){return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return function(i,u,o){var s=t.$current,l=T(i,o,u,n),f=s&&s.locals[l];if(!f){return}u.data("$uiView",{name:l,state:f.$$state});u.html(f.$template?f.$template:a);var c=e(u.contents());if(f.$$controller){f.$scope=i;f.$element=u;var p=r(f.$$controller,f);if(f.$$controllerAs){i[f.$$controllerAs]=p}u.data("$ngControllerController",p);u.children().data("$ngControllerController",p)}c(i)}}}}function T(e,r,t,n){var i=n(r.uiView||r.name||"")(e);var a=t.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(a?a.state.name:"")}r.module("ui.router.state").directive("uiView",F);r.module("ui.router.state").directive("uiView",U);function z(e,r){var t=e.match(/^\s*({[^}]*})\s*$/),n;if(t)e=r+"("+t[1]+")";n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!n||n.length!==4)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function B(e){var r=e.parent().inheritedData("$uiView");if(r&&r.state&&r.state.name){return r.state}}function J(e){var r=Object.prototype.toString.call(e.prop("href"))==="[object SVGAnimatedString]";var t=e[0].nodeName==="FORM";return{attr:t?"action":r?"xlink:href":"href",isAnchor:e.prop("tagName").toUpperCase()==="A",clickable:!t}}function K(e,r,t,n,i){return function(a){var u=a.which||a.button,o=i();if(!(u>1||a.ctrlKey||a.metaKey||a.shiftKey||e.attr("target"))){var s=t(function(){r.go(o.state,o.params,o.options)});a.preventDefault();var l=n.isAnchor&&!o.href?1:0;a.preventDefault=function(){if(l--<=0)t.cancel(s)}}}}function L(e,r){return{relative:B(e)||r.$current,inherit:true}}_.$inject=["$state","$timeout"];function _(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,a,u){var o=z(a.uiSref,e.current.name);var s={state:o.state,href:null,params:null};var f=J(i);var c=u[1]||u[0];s.options=l(L(i,e),a.uiSrefOpts?n.$eval(a.uiSrefOpts):{});var p=function(t){if(t)s.params=r.copy(t);s.href=e.href(o.state,s.params,s.options);if(c)c.$$addStateInfo(o.state,s.params);if(s.href!==null)a.$set(f.attr,s.href)};if(o.paramExpr){n.$watch(o.paramExpr,function(e){if(e!==s.params)p(e)},true);s.params=r.copy(n.$eval(o.paramExpr))}p();if(!f.clickable)return;i.bind("click",K(i,e,t,f,function(){return s}))}}}Y.$inject=["$state","$timeout"];function Y(e,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,n,i,a){var u=J(n);var o=a[1]||a[0];var s=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null];var l="["+s.map(function(e){return e||"null"}).join(", ")+"]";var f={state:null,params:null,options:null,href:null};function c(r){f.state=r[0];f.params=r[1];f.options=r[2];f.href=e.href(f.state,f.params,f.options);if(o)o.$$addStateInfo(f.state,f.params);if(f.href)i.$set(u.attr,f.href)}t.$watch(l,c,true);c(t.$eval(l));if(!u.clickable)return;n.bind("click",K(n,e,r,u,function(){return f}))}}}G.$inject=["$state","$stateParams","$interpolate"];function G(e,r,t){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(r,n,i,o){var l=[],f={},p,h;p=t(i.uiSrefActiveEq||"",false)(r);try{h=r.$eval(i.uiSrefActive)}catch(e){}h=h||t(i.uiSrefActive||"",false)(r);if(u(h)){s(h,function(t,n){if(a(t)){var i=z(t,e.current.name);v(i.state,r.$eval(i.paramExpr),n)}})}this.$$addStateInfo=function(e,r){if(u(h)&&l.length>0){return}v(e,r,h);m()};r.$on("$stateChangeSuccess",m);function v(r,t,i){var a=e.get(r,B(n));var u=$(r,t);l.push({state:a||{name:r},params:t,hash:u});f[u]=i}function $(e,t){if(!a(e)){throw new Error("state should be a string")}if(u(t)){return e+c(t)}t=r.$eval(t);if(u(t)){return e+c(t)}return e}function m(){for(var e=0;e<l.length;e++){if(y(l[e].state,l[e].params)){d(n,f[l[e].hash])}else{g(n,f[l[e].hash])}if(w(l[e].state,l[e].params)){d(n,p)}else{g(n,p)}}}function d(e,r){o(function(){e.addClass(r)})}function g(e,r){e.removeClass(r)}function y(r,t){return e.includes(r.name,t)}function w(r,t){return e.is(r.name,t)}m()}]}}r.module("ui.router.state").directive("uiSref",_).directive("uiSrefActive",G).directive("uiSrefActiveEq",G).directive("uiState",Y);H.$inject=["$state"];function H(e){var r=function(r,t){return e.is(r,t)};r.$stateful=true;return r}X.$inject=["$state"];function X(e){var r=function(r,t,n){return e.includes(r,t,n)};r.$stateful=true;return r}r.module("ui.router.state").filter("isState",H).filter("includedByState",X)})(window,window.angular);
//# sourceMappingURL=angular-ui-router.min.js.map